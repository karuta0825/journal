+++
title = "pipeをつかってファイル名を変更する"
author = ["karuta"]
date = 2021-07-27T20:25:00+09:00
publishDate = 2021-07-27T00:00:00+09:00
tags = ["unix"]
draft = false
+++

mvなどの引数を２つとるコマンドと `|` をどうやってつなげればよいのかわからかった。  
いつもfor文をつかって次のようことをしていた。  
`xargs` の `n` オプションでパイプと連携できる方法があったので整理しておく  

<!--more-->  

```sh
for i in `ls` | do mv $i $i.csv; done 
```

`xargs` の `n` オプションがつかえることがわかった。  

```sh
ls | grep YYYMM | sed 'p;s/YYYYMM/202106/' | xargs -n2 mv
```

これはファイル名のYYYYMMを202106にリネームできるコマンドである。  

sedに `p` をつけることで変換のその前後が出力できることがわかる。  

```sh
seq 10 20 | sed 'p;s/^1/10/'
```

```text
10
100
11
101
12
102
13
103
14
104
15
105
16
106
17
107
18
108
19
109
20
20
```

ここでは先頭に1がつくと、10に変換する処理をいれてる。  
10 => 100に、　18 => 108になる。  

xargsの `n` オプションは標準入力を何行で分割するかというものである。  
分割してそれぞれをコマンドの引数に割り当ててくれる。  

`-n 2` の場合、10と100, 11,101とこれら2つずつで分割される。  
そして `mv 10 100` と変換してくれるわけ。
